<template name="game_page">
    <h1>{{game.name}}</h1>
    current state: {{game.state}}
    {{#if isHost}}
        {{#if stateIsPreparation}}        
        <form class="start-game">
            <input type="submit" value="start game">
        </form>
        {{/if}}
        <form class="delete-game">
            <input type="submit" value="cancel game">
        </form>
    {{/if}}
    {{#if isInGame}}
        you are in this game
    {{else}}
        you are not in this game
        {{#if canJoinGame}}
            <form class="join-game">
                <select name="pokemon">
                    {{#each p in pokemon}}
                    <option value="{{p._id}}">{{p.nickname}}</option>
                    {{/each}}
                </select>
                <input type="submit" value="join game">
            </form>
        {{/if}}
    {{/if}}
    {{#if canMove}}
        <form class="action">
            {{#each move in moves}}
            <button type="submit" name="action" value="{{move}}">{{name move}}</button>
            {{/each}}
        </form>
    {{/if}}
    <ul id="log">
    {{#each s in game.states}}
        <li>New Turn</li>
        {{#each m in s.messages}}
        <li>{{m}}</li>
        {{/each}}
    {{/each}}
    </ul>
    <ul id="playerlist">
        {{#each game.players}}
        <li>{{>player}}</li>
        {{/each}}
        {{#each emptySlots}}
        <li>empty</li>
        {{/each}}
    </ul>
    {{>chatbox game=game._id}}
</template>

